<html>
    <head>
        <title>My first Three.js app</title>
        <style>canvas { width: 100%; height: 100% }</style>
    </head>
    
    <body>
        <script src="http://mrdoob.github.com/three.js/build/three.min.js"></script>
        <script src="https://stemkoski.github.io/Three.js/js/OrbitControls.js"></script>
        
        <script>
            function makeCube (x, y, z, cubeColor, useImage) {
                var geometry = new THREE.BoxGeometry(x, y, z);
                
                //var material = new THREE.MeshBasicMaterial( { color: cubeColor, wireframe:true} );
                
               var material = new THREE.MeshPhongMaterial( {color: cubeColor, specular: 0x555555, shininess: 100, emissive: 0x000000} );
               var newCube = new THREE.Mesh(geometry, material);
               
                if (useImage === true) {
                    var texture = new THREE.TextureLoader().load( 'images/student4.jpg' );
                    material = new THREE.MeshPhongMaterial( { map: texture } );
                    
                    newCube = new THREE.Mesh( geometry, new THREE.MultiMaterial(materials))
                }
                
                
                return newCube;
            }; 
            
            //multiface mesh
            var materials = [
                new THREE.MeshLambertMaterial({
                    map: new THREE.TextureLoader().load( 'images/red.png' ) }),   //x facing
                new THREE.MeshLambertMaterial({
                    map: new THREE.TextureLoader().load( 'images/red.png' ) }),
                new THREE.MeshLambertMaterial({
                    map: new THREE.TextureLoader().load( 'images/red.png' ) }),   //y facing
                new THREE.MeshLambertMaterial({
                    map: new THREE.TextureLoader().load( 'images/red.png' ) }),
                new THREE.MeshLambertMaterial({
                    map: new THREE.TextureLoader().load( 'images/student1.jpg' ) }),  //z facing
                new THREE.MeshLambertMaterial( {
                    map: new THREE.TextureLoader().load( 'images/red.png' ) })
            ];
            
            var loader = new THREE.TextureLoader();     //NEW method of loading textures
            var scene = new THREE.Scene();
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            //add light source NEED FOR PHONG MATERIALS
            var light1 = new THREE.DirectionalLight( 0xffffff);
            var light2 = new THREE.DirectionalLight(0xffffff)
            light1.position.set(10, 70, 10);
            light2.position.set(-10, 70, 0);
            
            var ambientLight = new THREE.AmbientLight(0x111111, 20);
            ambientLight.position.set(0, 50, -5);
            
            //scene.add(light1);
            //scene.add(light2);
            scene.add(ambientLight);
            
            var axisHelper = new THREE.AxisHelper(70);
            scene.add( axisHelper );
            
            //set camera and mesh positions
            // Create a camera, zoom it out from the model a bit, and add it to the scene.
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 1, 10000);
            camera.position.set(50,16,50);
            scene.add(camera);
            
            //setup cubes and constants
            var cube_dim = 20;
            var year1 = makeCube(cube_dim, cube_dim, cube_dim, new THREE.Color('skyblue'), true);
            var year2 = makeCube(cube_dim, cube_dim*2, cube_dim, new THREE.Color('yellow'), false);
            var year3 = makeCube(cube_dim, cube_dim*3, cube_dim, new THREE.Color('green'), false);
            
            //add meshes to scene
            scene.add(year1);
            scene.add(year2);
            scene.add(year3);
            
            //cube positions
            year2.position.set(0, (cube_dim/2), -cube_dim);
            year3.position.set(0, cube_dim, -(2*cube_dim));
            
            //orbit controls
            /* GETTING ERROR FOR STACK SIZE TOO BIG*** 
            controls = new THREE.OrbitControls( camera );
            controls.addEventListener( 'change', render );*/
            
            
            var angle = 0, x_place, z_place, distance_cam = 100;    //for moving camera
            
            //main function
            function render() {
                requestAnimationFrame(render);
                
                //***DO FUNCTION OF CAMERA POSITION TO ROTATE IN CIRCLE**
                angle += 0.1;
                x_place = Math.sin(angle) * distance_cam;
                z_place = Math.cos(angle) * distance_cam;
                
                camera.position.set(x_place, 20, z_place);
                camera.lookAt(year2.position);
                renderer.render(scene, camera);
            };
            
            //main loop called
            render();   
        </script>
    </body>
</html>